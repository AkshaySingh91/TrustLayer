<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Guard - Individual Cookie Selection Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .feature-highlight {
            background: #dbeafe;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            margin: 15px 0;
        }
        .instructions {
            background: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
            margin-bottom: 20px;
        }
        .cookie-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .cookie-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }
        .cookie-card.critical { border-color: #ef4444; }
        .cookie-card.high { border-color: #f97316; }
        .cookie-card.medium { border-color: #f59e0b; }
        .cookie-card.low { border-color: #10b981; }
        .risk-indicator {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
        }
        .risk-critical { background: #fef2f2; color: #dc2626; }
        .risk-high { background: #fff7ed; color: #ea580c; }
        .risk-medium { background: #fffbeb; color: #d97706; }
        .risk-low { background: #f0fdf4; color: #059669; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üç™ Cookie Guard - Individual Cookie Selection</h1>
        <div class="instructions">
            <h3>üéØ New Feature: Granular Cookie Control</h3>
            <p><strong>You can now select exactly which cookies to accept or block!</strong></p>
            <ol>
                <li>Open Cookie Guard extension popup</li>
                <li>Click "Scan Current Page" to analyze cookies</li>
                <li>Notice the new <strong>checkboxes</strong> next to each cookie</li>
                <li>Use the <strong>Cookie Management</strong> section that appears</li>
                <li>Select specific cookies and apply your choices</li>
            </ol>
        </div>
    </div>

    <div class="test-container">
        <h2>üéõÔ∏è Cookie Management Features</h2>
        <div class="feature-highlight">
            <h4>‚úÖ Individual Selection</h4>
            <p>Each cookie now has a checkbox allowing you to choose whether to accept or block it individually.</p>
        </div>
        
        <div class="feature-highlight">
            <h4>üîç Smart Bulk Actions</h4>
            <ul>
                <li><strong>Select All:</strong> Choose all cookies</li>
                <li><strong>Select None:</strong> Deselect all cookies</li>
                <li><strong>Essential Only:</strong> Select only essential cookies</li>
                <li><strong>Low Risk Only:</strong> Select only low-risk cookies</li>
            </ul>
        </div>

        <div class="feature-highlight">
            <h4>üéØ Granular Actions</h4>
            <ul>
                <li><strong>Apply Selection:</strong> Accept selected cookies, block others</li>
                <li><strong>Block Selected:</strong> Block only the selected cookies</li>
                <li><strong>Allow Selected:</strong> Allow only the selected cookies</li>
            </ul>
        </div>

        <div class="feature-highlight">
            <h4>üìä Selection Counter</h4>
            <p>Real-time display showing "X of Y cookies selected" to help you track your choices.</p>
        </div>
    </div>

    <div class="test-container">
        <h2>üß™ Test Cookies Created</h2>
        <div id="cookie-status">Setting up diverse test cookies...</div>
        
        <div class="cookie-showcase">
            <div class="cookie-card critical">
                <h4>üö® sessionid</h4>
                <span class="risk-indicator risk-critical">Critical</span>
                <p><strong>Type:</strong> Authentication</p>
                <p><strong>Purpose:</strong> Session management</p>
                <p><strong>Risk:</strong> Session hijacking potential</p>
                <p><strong>Essential:</strong> Yes ‚úÖ</p>
            </div>

            <div class="cookie-card high">
                <h4>‚ö†Ô∏è _ga</h4>
                <span class="risk-indicator risk-high">High</span>
                <p><strong>Type:</strong> Analytics Tracking</p>
                <p><strong>Purpose:</strong> Google Analytics</p>
                <p><strong>Risk:</strong> Cross-site tracking</p>
                <p><strong>Essential:</strong> No ‚ùå</p>
            </div>

            <div class="cookie-card high">
                <h4>‚ö†Ô∏è _fbp</h4>
                <span class="risk-indicator risk-high">High</span>
                <p><strong>Type:</strong> Social Media Tracking</p>
                <p><strong>Purpose:</strong> Facebook Pixel</p>
                <p><strong>Risk:</strong> Advertising surveillance</p>
                <p><strong>Essential:</strong> No ‚ùå</p>
            </div>

            <div class="cookie-card medium">
                <h4>‚ÑπÔ∏è user_preferences</h4>
                <span class="risk-indicator risk-medium">Medium</span>
                <p><strong>Type:</strong> Functional</p>
                <p><strong>Purpose:</strong> Store user settings</p>
                <p><strong>Risk:</strong> Minor privacy impact</p>
                <p><strong>Essential:</strong> No ‚ùå</p>
            </div>

            <div class="cookie-card low">
                <h4>‚úÖ _csrf_token</h4>
                <span class="risk-indicator risk-low">Low</span>
                <p><strong>Type:</strong> Security</p>
                <p><strong>Purpose:</strong> CSRF protection</p>
                <p><strong>Risk:</strong> Security benefit</p>
                <p><strong>Essential:</strong> Yes ‚úÖ</p>
            </div>

            <div class="cookie-card low">
                <h4>‚úÖ cookie_consent</h4>
                <span class="risk-indicator risk-low">Low</span>
                <p><strong>Type:</strong> Functional</p>
                <p><strong>Purpose:</strong> Remember consent</p>
                <p><strong>Risk:</strong> Minimal</p>
                <p><strong>Essential:</strong> No ‚ùå</p>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h2>üéÆ Testing Scenarios</h2>
        <div class="feature-highlight">
            <h4>Scenario 1: Privacy-Focused User</h4>
            <p>Select only <strong>Essential</strong> cookies (sessionid, _csrf_token) and block all tracking cookies.</p>
        </div>

        <div class="feature-highlight">
            <h4>Scenario 2: Balanced Approach</h4>
            <p>Select <strong>Low Risk Only</strong> plus essential authentication cookies for balanced functionality.</p>
        </div>

        <div class="feature-highlight">
            <h4>Scenario 3: Custom Selection</h4>
            <p>Manually choose specific cookies - perhaps allow analytics but block social media tracking.</p>
        </div>

        <div class="feature-highlight">
            <h4>Scenario 4: Block Specific Threats</h4>
            <p>Use <strong>Select All</strong> then manually uncheck high-risk tracking cookies like _fbp.</p>
        </div>
    </div>

    <div class="test-container">
        <h2>‚ú® Expected User Experience</h2>
        <ul>
            <li>üéØ <strong>Precise Control:</strong> Choose exactly which cookies you're comfortable with</li>
            <li>üìä <strong>Informed Decisions:</strong> See risk levels and purposes before deciding</li>
            <li>‚ö° <strong>Quick Actions:</strong> Use bulk selection for common scenarios</li>
            <li>üîí <strong>Safety First:</strong> Essential cookies are pre-selected for functionality</li>
            <li>üìà <strong>Real-time Feedback:</strong> Selection counter helps track your choices</li>
            <li>‚úÖ <strong>Confirmation:</strong> Clear confirmation dialogs before applying changes</li>
        </ul>
    </div>

    <script>
        // Set comprehensive test cookies with various risk profiles
        const testCookies = [
            // Critical authentication cookie (Essential)
            { 
                name: 'sessionid', 
                value: 'abc123xyz789def456ghi789jkl012mno345pqr678',
                path: '/', 
                secure: true, 
                httpOnly: true,
                essential: true,
                risk: 'Critical'
            },
            
            // High-risk Google Analytics tracking
            { 
                name: '_ga', 
                value: 'GA1.2.1234567890.1638360000',
                domain: '.example.com',
                path: '/', 
                expires: 'Fri, 31 Dec 2025 23:59:59 GMT',
                essential: false,
                risk: 'High'
            },
            
            // High-risk Facebook tracking pixel
            { 
                name: '_fbp', 
                value: 'fb.1.1640123456789.987654321',
                domain: '.example.com',
                path: '/', 
                expires: 'Fri, 31 Dec 2025 23:59:59 GMT',
                essential: false,
                risk: 'High'
            },
            
            // Medium-risk user preferences
            { 
                name: 'user_preferences', 
                value: 'theme:dark,lang:en,notifications:true,layout:grid',
                path: '/', 
                expires: 'Fri, 31 Dec 2024 23:59:59 GMT',
                essential: false,
                risk: 'Medium'
            },
            
            // Low-risk CSRF protection (Essential)
            { 
                name: '_csrf_token', 
                value: 'xyz789abc123def456ghi789jkl012mno345pqr678stu901',
                path: '/', 
                secure: true, 
                httpOnly: true, 
                sameSite: 'strict',
                essential: true,
                risk: 'Low'
            },
            
            // Low-risk consent cookie
            { 
                name: 'cookie_consent', 
                value: 'accepted_v2',
                path: '/', 
                expires: 'Fri, 31 Dec 2024 23:59:59 GMT',
                essential: false,
                risk: 'Low'
            },
            
            // Additional test cookies
            { 
                name: 'shopping_cart', 
                value: 'item123,item456,item789',
                path: '/shop', 
                essential: false,
                risk: 'Low'
            },
            
            { 
                name: '_gid', 
                value: 'GA1.2.987654321.1640123456',
                domain: '.example.com',
                path: '/', 
                expires: 'Mon, 15 Oct 2025 23:59:59 GMT',
                essential: false,
                risk: 'High'
            }
        ];

        // Set cookies for testing
        testCookies.forEach(cookie => {
            let cookieString = `${cookie.name}=${cookie.value}`;
            if (cookie.path) cookieString += `; path=${cookie.path}`;
            if (cookie.domain) cookieString += `; domain=${cookie.domain}`;
            if (cookie.expires) cookieString += `; expires=${cookie.expires}`;
            if (cookie.secure) cookieString += `; secure`;
            if (cookie.httpOnly) cookieString += `; httponly`;
            if (cookie.sameSite) cookieString += `; samesite=${cookie.sameSite}`;
            
            document.cookie = cookieString;
        });

        // Update status with detailed breakdown
        document.getElementById('cookie-status').innerHTML = `
            <div style="color: #059669; font-weight: bold; margin-bottom: 10px;">
                ‚úÖ ${testCookies.length} diverse test cookies successfully created!
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px;">
                <div style="background: #fef2f2; padding: 8px; border-radius: 6px; border: 1px solid #fecaca;">
                    <strong style="color: #dc2626;">üö® Critical: 1</strong><br>
                    <small>Session authentication</small>
                </div>
                <div style="background: #fff7ed; padding: 8px; border-radius: 6px; border: 1px solid #fed7aa;">
                    <strong style="color: #ea580c;">‚ö†Ô∏è High Risk: 3</strong><br>
                    <small>Tracking & analytics</small>
                </div>
                <div style="background: #fffbeb; padding: 8px; border-radius: 6px; border: 1px solid #fde68a;">
                    <strong style="color: #d97706;">‚ÑπÔ∏è Medium Risk: 1</strong><br>
                    <small>User preferences</small>
                </div>
                <div style="background: #f0fdf4; padding: 8px; border-radius: 6px; border: 1px solid #bbf7d0;">
                    <strong style="color: #059669;">‚úÖ Low Risk: 3</strong><br>
                    <small>Functional & security</small>
                </div>
            </div>
            <p style="margin-top: 15px; font-size: 14px; color: #374151;">
                üéØ <strong>Perfect for testing the new cookie selection interface!</strong> 
                Open Cookie Guard and try different selection strategies.
            </p>
        `;

        console.log("üç™ Individual Cookie Selection test environment ready!");
        console.log("üéõÔ∏è Test the new granular cookie management features");
        console.log("üìä Cookies span all risk levels for comprehensive testing");
    </script>
</body>
</html>